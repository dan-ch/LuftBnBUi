(this.webpackJsonpluftbnb=this.webpackJsonpluftbnb||[]).push([[0],{122:function(e,t,n){},312:function(e,t,n){},459:function(e,t,n){"use strict";n.r(t);var a,r=n(1),c=n.n(r),s=n(60),i=n.n(s),o=(n(122),n(312),n(19)),l=n(531),j=n(26),u=n(0),d=function(e){var t,n=e.label,a=e.name,r=e.placeholder,c=e.type,s=e.variant,i=e.multiline,d=e.numberProps,b=e.value,p=Object(j.f)(),O=p.register,h=p.formState.errors;return Object(u.jsx)(l.a,Object(o.a)(Object(o.a)({},O(a)),{},{label:n,name:a,placeholder:r,fullWidth:!0,type:c,color:"primary",variant:s,error:!!h[a],multiline:i,inputProps:d,helperText:h[a]?null===(t=h[a])||void 0===t?void 0:t.message:"",defaultValue:b}))},b=n(9),p=n(543),O=n(544),h=n(545),f=n(27),m=n(147),x=n.n(m),v=n(256),g=n.n(v),y=n(253),_=n.n(y),k=n(255),w=n.n(k),N=n(252),D=n.n(N),S=n(115),z=n.n(S);!function(e){e.logout="SIGN_OUT",e.setToken="SET_TOKEN",e.setRefreshToken="SET_REFRESH_TOKEN",e.setUser="SET_USER"}(a||(a={}));var C={user:null,authenticated:!1,refreshToken:null,token:null},T=Object(r.createContext)({userState:C,dispatch:function(){return null}}),P=function(e,t){var n=t.type,r=t.payload;switch(n){case a.logout:return localStorage.removeItem("LuftBnBAccessToken"),localStorage.removeItem("LuftBnBRefreshToken"),C;case a.setToken:return Object(o.a)(Object(o.a)({},e),{},{authenticated:!0,token:r});case a.setRefreshToken:return Object(o.a)(Object(o.a)({},e),{},{refreshToken:r});case a.setUser:return Object(o.a)(Object(o.a)({},e),{},{user:r});default:return e}},I=function(e){var t=e.children,n=Object(r.useReducer)(P,C),c=Object(b.a)(n,2),s=c[0],i=c[1];return Object(r.useEffect)((function(){localStorage.getItem("LuftBnBRefreshToken")&&z.a.get("".concat("https://luftbnb-api.herokuapp.com","/auth/refresh-token"),{headers:{authorization:"Bearer ".concat(localStorage.getItem("LuftBnBRefreshToken"))}}).then((function(e){i({type:a.setToken,payload:e.data.access_token}),i({type:a.setRefreshToken,payload:e.data.refresh_token}),localStorage.setItem("LuftBnBAccessToken",e.data.access_token),localStorage.setItem("LuftBnBRefreshToken",e.data.refresh_token),z.a.get("".concat("https://luftbnb-api.herokuapp.com","/user"),{headers:{authorization:"Bearer ".concat(e.data.access_token)}}).then((function(e){i({type:a.setUser,payload:e.data})})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}))}),[]),Object(u.jsx)(T.Provider,{value:{userState:s,dispatch:i},children:t})},L=n(254),E=n.n(L),M=function(){var e=Object(r.useContext)(T).userState,t=[{label:"Wyszukaj",path:"search",icon:Object(u.jsx)(x.a,{})},{label:"Rezerwacje",path:"myReservations",icon:Object(u.jsx)(D.a,{})},e.authenticated?{label:"Dodaj",path:"addOffer",icon:Object(u.jsx)(_.a,{})}:{label:"Zaloguj si\u0119",path:"signin",icon:Object(u.jsx)(E.a,{})},e.authenticated?{label:"Ustawienia",path:"settings",icon:Object(u.jsx)(w.a,{})}:{label:"Zarejestruj si\u0119",path:"signup",icon:Object(u.jsx)(g.a,{})}],n=Object(r.useState)("search"),a=Object(b.a)(n,2),c=a[0],s=a[1];return Object(u.jsx)(p.a,{sx:{width:500},children:Object(u.jsx)(O.a,{showLabels:!0,value:c,onChange:function(e,t){s(t)},className:"bottom-navbar",children:t.map((function(e){return Object(u.jsx)(h.a,{label:e.label,icon:e.icon,value:e.path,component:f.b,to:"/".concat(e.path)},e.path)}))})})},R=n(257),B=n.n(R),F=function(){return Object(u.jsx)("nav",{className:"navbar centerXY",children:Object(u.jsxs)("div",{className:"navbar__content",children:[Object(u.jsx)(f.b,{to:"/home",className:"navbar__content__company-name",children:"LuftB&B"}),Object(u.jsx)(B.a,{fontSize:"large"})]})})},A=n(258),W=n.n(A),H=n(259),Y=n.n(H),U=n(546),Q=n(547),Z=function(e){var t,n=e.label,a=e.name,c=e.variant,s=Object(r.useState)(!1),i=Object(b.a)(s,2),d=i[0],p=i[1],O=Object(j.f)(),h=O.register,f=O.formState.errors;return Object(u.jsx)(l.a,Object(o.a)(Object(o.a)({},h(a)),{},{label:n,name:a,fullWidth:!0,type:d?"text":"password",color:"primary",variant:c,error:!!f[a],helperText:f[a]?null===(t=f[a])||void 0===t?void 0:t.message:"",InputProps:{endAdornment:Object(u.jsx)(U.a,{position:"start",children:Object(u.jsx)(Q.a,{onClick:function(){p(!d)},children:d?Object(u.jsx)(W.a,{style:{fill:"#989898"}}):Object(u.jsx)(Y.a,{style:{fill:"#989898"}})})})}}))},V=n(548),q=n(527),$=n(532),J=n(540),G=function(e){var t=e.name,n=e.value,a=e.setValue,r=e.variant,c=e.label,s=e.menuItems,i=e.placeholder,l=Object(j.f)().register;return Object(u.jsxs)(J.a,{children:[Object(u.jsx)($.a,{id:"simple-select-label",children:c}),Object(u.jsx)(q.a,Object(o.a)(Object(o.a)({},l(t)),{},{id:"simple-select",labelId:"simple-select-label",value:n||"",onChange:function(e){a(e.target.value)},variant:r,label:c,placeholder:i,children:s.map((function(e,t){return Object(u.jsx)(V.a,{value:e.value,children:e.label},t)}))}))]})},K=n(549),X=function(e){var t=e.size;return Object(u.jsx)("div",{className:"loading-indicator",children:Object(u.jsx)(K.a,{size:t})})},ee=n(16),te=n.n(ee),ne=n(21),ae=n(155),re=n(536),ce=n(82),se=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,30}$/,ie={email:ce.b().email("Z\u0142y email").required("Email jest wymagany"),password:ce.b().required("Has\u0142o jest wymagane").min(8,"Has\u0142o jest za kr\xf3tkie").max(30,"Has\u0142o jest za d\u0142ugie").matches(se,"Has\u0142o musi zawiera\u0107 co najmniej jedn\u0105 wielk\u0105 i ma\u0142\u0105 liter\u0119, znak specjalny oraz cyfr\u0119")},oe=ce.a().shape(Object(o.a)(Object(o.a)({},ie),{},{firstName:ce.b().required("Imi\u0119 jest wymagane").min(3,"Imi\u0119 jest za kr\xf3tkie").max(15,"Imi\u0119 jest za d\u0142ugie"),lastName:ce.b().required("Nazwisko jest wymagane").min(3,"Nazwisko jest za kr\xf3tkie").max(15,"Nazwisko jest za d\u0142ugie"),password_confirmation:ce.b().required("Musisz potwierdzi\u0107 swoje has\u0142o").min(8,"Has\u0142o jest za kr\xf3tkie").max(30,"Has\u0142o jest za d\u0142ugie").matches(se,"Has\u0142o musi zawiera\u0107 co najmniej jedn\u0105 wielk\u0105 i ma\u0142\u0105 liter\u0119, znak specjalny oraz cyfr\u0119")})),le=ce.a().shape(ie),je=n(23),ue=z.a.create({baseURL:"https://luftbnb-api.herokuapp.com"});ue.interceptors.request.use((function(e){return e.headers.authorization="Bearer ".concat(localStorage.getItem("LuftBnBAccessToken")),e}));var de,be=ue,pe=n(529),Oe=function(){var e=Object(r.useContext)(T).dispatch,t=Object(je.useMutation)(function(){var e=Object(ne.a)(te.a.mark((function e(t){var n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.post("./auth/login",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(t){e({type:a.setToken,payload:t.data.access_token}),e({type:a.setRefreshToken,payload:t.data.refresh_token}),localStorage.setItem("LuftBnBAccessToken",t.data.access_token),localStorage.setItem("LuftBnBRefreshToken",t.data.refresh_token),be.get("".concat("https://luftbnb-api.herokuapp.com","/user"),{headers:{authorization:"Bearer ".concat(t.data.access_token)}}).then((function(t){e({type:a.setUser,payload:t.data})})).catch((function(e){return console.log(e)}))}}),n=(t.data,t.isLoading),c=t.mutate,s=Object(j.e)({resolver:Object(ae.a)(le)});return Object(u.jsxs)("main",{className:"auth",children:[Object(u.jsx)("div",{className:"auth__header",children:Object(u.jsx)("h1",{children:"Zaloguj si\u0119"})}),Object(u.jsxs)(j.a,Object(o.a)(Object(o.a)({},s),{},{children:[Object(u.jsxs)("form",{onSubmit:s.handleSubmit((function(e){c(e)})),className:"auth__form auth__form--sign-in",children:[Object(u.jsx)(d,{label:"Email",name:"email",placeholder:"email@email.com",type:"email",variant:"outlined"}),Object(u.jsx)(Z,{label:"Has\u0142o",name:"password",variant:"outlined"}),n?Object(u.jsx)(pe.a,{loading:!0,variant:"contained",children:"Submit"}):Object(u.jsx)(re.a,{type:"submit",variant:"contained",children:"Zaloguj si\u0119"})]}),Object(u.jsxs)("div",{className:"auth__footer",children:[Object(u.jsx)("p",{children:"Nie masz konta? "}),Object(u.jsx)(f.b,{to:"/signup",children:"Zarejestruj si\u0119"})]})]}))]})},he=function(){var e=Object(r.useContext)(T).dispatch,t=Object(je.useMutation)(function(){var e=Object(ne.a)(te.a.mark((function e(t){var n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.post("./auth/register",t);case 2:return n=e.sent,console.log(n),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(t){e({type:a.setToken,payload:t.data.access_token}),e({type:a.setRefreshToken,payload:t.data.refresh_token}),localStorage.setItem("LuftBnBAccessToken",t.data.access_token),localStorage.setItem("LuftBnBRefreshToken",t.data.refresh_token),be.get("".concat("https://luftbnb-api.herokuapp.com","/user"),{headers:{authorization:"Bearer ".concat(t.data.access_token)}}).then((function(t){e({type:a.setUser,payload:t.data})})).catch((function(e){return console.log(e)}))}}),n=t.isLoading,c=t.mutate,s=Object(j.e)({resolver:Object(ae.a)(oe)});return Object(u.jsxs)("main",{className:"auth",children:[Object(u.jsx)("div",{className:"auth__header",children:Object(u.jsx)("h1",{children:"Zarejestruj si\u0119"})}),Object(u.jsx)(j.a,Object(o.a)(Object(o.a)({},s),{},{children:Object(u.jsxs)("form",{onSubmit:s.handleSubmit((function(e){c(e)})),className:"auth__form auth__form--sign-up",children:[Object(u.jsx)(d,{label:"Imi\u0119",name:"firstName",placeholder:"Imi\u0119",type:"text",variant:"outlined"}),Object(u.jsx)(d,{label:"Nazwisko",name:"lastName",placeholder:"Nazwisko",type:"text",variant:"outlined"}),Object(u.jsx)(d,{label:"Email",name:"email",placeholder:"email@email.com",type:"email",variant:"outlined"}),Object(u.jsx)(Z,{label:"Password",name:"password",variant:"outlined"}),Object(u.jsx)(Z,{label:"Confirm Password",name:"password_confirmation",variant:"outlined"}),n?Object(u.jsx)(pe.a,{loading:!0,variant:"contained",children:"Submit"}):Object(u.jsx)(re.a,{type:"submit",variant:"contained",children:"Zarejestruj si\u0119"})]})})),Object(u.jsxs)("span",{className:"auth__footer",children:[Object(u.jsx)("p",{children:"Masz ju\u017c konto? "}),Object(u.jsx)(f.b,{to:"/signin",className:"sign-in__footer__link",children:"Zaloguj si\u0119"})]})]})},fe=(n(230),n(22)),me=n(80),xe=n.n(me),ve=n(79),ge=n.n(ve),ye=(n(437),n(438),n(265)),_e=function(e){var t=e.startDate,n=e.endDate,a=e.disabledDates,c=e.onChange,s=Object(r.useState)([{startDate:t,endDate:n,key:"selection"}]),i=Object(b.a)(s,2),o=i[0],l=i[1];return Object(u.jsx)(ye.DateRange,{className:"calendar",showDateDisplay:!1,onChange:function(e){e.selection.startDate&&e.selection.endDate&&c(e.selection.startDate,e.selection.endDate),l([e.selection])},moveRangeOnFirstSelection:!1,minDate:new Date,months:1,ranges:o,direction:"horizontal",rangeColors:["#FF385CFF"],disabledDates:a})};!function(e){e.setStartDate="SET_START_DATE",e.setEndDate="SET_END_DATE",e.setCity="SET_CITY",e.setPeople="SET_PEOPLE"}(de||(de={}));var ke={startDate:new Date,endDate:new Date(Date.now()+864e5),city:"",people:1},we=Object(r.createContext)({state:ke,dispatch:function(){return null}}),Ne=function(e,t){var n=t.type,a=t.payload;switch(n){case de.setCity:return Object(o.a)(Object(o.a)({},e),{},{city:a});case de.setPeople:return Object(o.a)(Object(o.a)({},e),{},{people:a});case de.setStartDate:return Object(o.a)(Object(o.a)({},e),{},{startDate:a});case de.setEndDate:return Object(o.a)(Object(o.a)({},e),{},{endDate:a});default:return e}},De=function(e){var t=e.children,n=Object(r.useReducer)(Ne,ke),a=Object(b.a)(n,2),c=a[0],s=a[1];return Object(u.jsx)(we.Provider,{value:{state:c,dispatch:s},children:t})},Se=n(98),ze=n.n(Se),Ce=function(e){var t,n=e.dailyPrice,a=e.offerId,c=Object(r.useContext)(we).state,s=c.startDate,i=c.endDate,o=Object(fe.g)(),l=Object(je.useMutation)(Object(ne.a)(te.a.mark((function e(){var t,n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("startDate",ze()(c.startDate).format("YYYY-MM-DD")),t.append("endDate",ze()(c.endDate).format("YYYY-MM-DD")),t.append("offer",a.toString()),e.next=6,be.post("./reservation",t);case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)}))),{onSuccess:function(){o("/myReservations")}}),j=l.isLoading,d=l.mutate,b=function(e){return new Intl.DateTimeFormat("pl-PL",{month:"short",day:"numeric"}).format(new Date(e))};return Object(u.jsxs)("div",{className:"reservation",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{className:"reservation__title",children:"Rezerwuj"}),Object(u.jsxs)("p",{children:[n,"z\u0142 / noc"]}),Object(u.jsx)("p",{children:Object(u.jsxs)("u",{children:[b(s)," \u2013 ",b(i)]})})]}),Object(u.jsxs)("div",{className:"reservation__total",children:[Object(u.jsxs)("p",{children:["\u0141\u0105cznie: ",Object(u.jsxs)("u",{children:[(t=function(e,t){var n=Math.abs(e.getTime()-t.getTime());return Math.ceil(n/864e5+1)}(s,i),n*t),"z\u0142"]})]}),j?Object(u.jsx)(pe.a,{loading:!0,variant:"contained",children:" Submit "}):Object(u.jsx)(re.a,{onClick:function(){return d()},children:"Rezerwuj"})]})]})},Te=n(533),Pe=function(e){var t=e.refetchOpinions,n=e.offer,a=c.a.useState(2),r=Object(b.a)(a,2),s=r[0],i=r[1],l=Object(je.useMutation)(function(){var e=Object(ne.a)(te.a.mark((function e(t){var n,a;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("content",t.content.toString()),n.append("rate",t.rate.toString()),n.append("offer",t.offer.toString()),e.next=6,be.post("./opinion",n);case 6:return a=e.sent,console.log(a),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){t()}}),O=(l.isLoading,l.mutate),h=Object(j.e)();return Object(u.jsx)("article",{children:Object(u.jsx)(j.a,Object(o.a)(Object(o.a)({},h),{},{children:Object(u.jsxs)("form",{onSubmit:h.handleSubmit((function(e){var t={content:e.opinion,rate:s,offer:n.id};O(t)})),className:"add-opinion-form",children:[Object(u.jsxs)("div",{className:"opinions-title",children:[Object(u.jsx)("h3",{children:"Co my\u015blisz o tym obiekcie?"}),Object(u.jsx)(p.a,{sx:{display:"flex",alignItems:"center"},children:Object(u.jsx)(Te.a,{name:"hover-feedback",value:s,precision:1,onChange:function(e,t){i(t)},emptyIcon:Object(u.jsx)(ge.a,{style:{opacity:.55},fontSize:"inherit"})})})]}),Object(u.jsx)(d,{label:"Dodaj opini\u0119",name:"opinion",placeholder:"Miejsce na opini\u0119...",type:"text",variant:"outlined",multiline:!0}),Object(u.jsx)(re.a,{type:"submit",children:"Dodaj"})]})}))})},Ie=function(e){var t,n=e.opinion,a=e.onDelete,c=Object(r.useContext)(T).userState,s=Object(je.useMutation)(Object(ne.a)(te.a.mark((function e(){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.delete("/opinion/".concat(n.id));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),{onSuccess:function(){a()}}).mutate;return Object(u.jsxs)("div",{className:"opinion",children:[Object(u.jsxs)("div",{className:"opinion__author",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{children:n.author.firstName}),Object(u.jsx)("p",{className:"opinion__post-date",children:n.date})]}),Object(u.jsxs)("div",{className:"opinion__rating",children:[n.rate,"/5 ",Object(u.jsx)(ge.a,{})]})]}),Object(u.jsx)("p",{className:"opinion__comment",children:n.content}),(null===(t=c.user)||void 0===t?void 0:t.id)===n.author.id&&Object(u.jsx)("p",{onClick:function(){return s()},className:"opinion__delete-opinion",children:"Usu\u0144"})]})},Le=function(e){var t,n,a=e.rateCount,c=e.opinionsCount,s=e.opinions,i=e.refetchOpinions,o=e.offer,l=e.offerOwnerId,j=Object(r.useContext)(T).userState;return console.log(l),console.log(null===(t=j.user)||void 0===t?void 0:t.id),Object(u.jsxs)("section",{children:[l!==(null===(n=j.user)||void 0===n?void 0:n.id)&&Object(u.jsx)(Pe,{refetchOpinions:i,offer:o}),Object(u.jsxs)("div",{className:"opinions-title",children:[Object(u.jsx)("p",{children:"Recenzje"}),Object(u.jsxs)("span",{className:"offer__ratings",children:[Object(u.jsx)(ge.a,{}),Object(u.jsx)("p",{children:a.toFixed(2)}),Object(u.jsxs)("p",{className:"offer--clickable-text",children:["(Ilo\u015b\u0107 recenzji: ",c,")"]})]})]}),s.map((function(e){return Object(u.jsx)(Ie,{opinion:e,onDelete:i},e.id)}))]})},Ee=n(266),Me=function(e){var t=e.images,n=null===t||void 0===t?void 0:t.map((function(e,t){return Object(u.jsx)("img",{src:e,alt:"zdj\u0119cie".concat(t)},e)}));return Object(u.jsx)(Ee.Carousel,{className:"offer-carousel",showArrows:!0,showStatus:!1,dynamicHeight:!0,showThumbs:!1,children:n})},Re=Object(r.memo)(Me),Be=function(){var e=Object(ne.a)(te.a.mark((function e(){var t;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be("./cities");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(ne.a)(te.a.mark((function e(t){var n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.get("./offer/".concat(t),{params:{withRatings:!0}});case 2:return n=e.sent,e.next=5,n.data;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(ne.a)(te.a.mark((function e(t){var n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.get("./offer/".concat(t,"/owner"));case 2:return n=e.sent,e.next=5,n.data;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),We=function(){var e=Object(ne.a)(te.a.mark((function e(t){var n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.get("./offer/".concat(t,"/reservations"));case 2:return n=e.sent,e.next=5,n.data;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),He=function(){var e=Object(ne.a)(te.a.mark((function e(t){var n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.get("./offer/".concat(t,"/opinions"));case 2:return n=e.sent,e.next=5,n.data;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ye=function(){var e,t=Object(je.useQuery)("cities",Be),n=(t.isFetching,t.data,t.error,Object(fe.g)()),a=Object(fe.h)().id,c=Object(r.useContext)(we),s=c.state,i=c.dispatch,o=Object(r.useContext)(T).userState,l=Object(je.useQuery)(["offer",a],(function(){return Fe(a)})),j=l.data,d=l.isFetching,b=Object(je.useQuery)(["offerOwner",a],(function(){return Ae(a)})),p=b.data,O=b.isFetching,h=Object(je.useQuery)(["offerReservations",a],(function(){return We(a)}),{refetchOnWindowFocus:!0,refetchInterval:6e4}),m=h.data,x=(h.isFetching,Object(je.useQuery)(["offerOpinions",a],(function(){return He(a)}),{enabled:!1})),v=x.data,g=x.isFetching,y=x.refetch,_=null===m||void 0===m?void 0:m.map((function(e){var t=new Date(e.startDate),n=new Date(e.endDate),a=new Date(t.getTime()),r=[];for(r.push(t);a.getTime()<n.getTime();)a.setDate(a.getDate()+1),r.push(new Date(a));return r})),k=null===_||void 0===_?void 0:_.reduce((function(e,t){return e.concat(t)}),[]);return d||O?Object(u.jsx)(X,{}):Object(u.jsxs)("main",{className:"offer",children:[Object(u.jsxs)("nav",{className:"offer__nav",children:[Object(u.jsx)(xe.a,{onClick:function(){return n(-1)}}),(null===(e=o.user)||void 0===e?void 0:e.id)===(null===p||void 0===p?void 0:p.id)&&Object(u.jsx)(f.b,{to:"/editOffer",state:{id:null===j||void 0===j?void 0:j.id},children:"Edytuj"})]}),Object(u.jsx)(Re,{images:null===j||void 0===j?void 0:j.images.map((function(e){return e.url}))}),Object(u.jsxs)("section",{className:"offer__content",children:[Object(u.jsx)("h1",{className:"offer__title",children:null===j||void 0===j?void 0:j.title}),Object(u.jsxs)("article",{className:"offer__info",children:[Object(u.jsxs)("span",{className:"offer__ratings",children:[Object(u.jsx)(ge.a,{}),Object(u.jsx)("p",{children:Number(null===j||void 0===j?void 0:j.ratings.rateCount).toFixed(2)}),Object(u.jsxs)("p",{className:"offer--clickable-text",children:["(Ilo\u015b\u0107 rezenzji: ",null===j||void 0===j?void 0:j.ratings.opinionsCount,")"]})]}),Object(u.jsx)("p",{className:"offer--clickable-text",children:null===j||void 0===j?void 0:j.city})]}),Object(u.jsx)("div",{className:"offer__divider"}),Object(u.jsx)("article",{className:"offer__info",children:Object(u.jsxs)("div",{className:"offer__host-info",children:[Object(u.jsx)("p",{children:"Ma\u0142y domek"}),Object(u.jsxs)("p",{children:["Ilo\u015b\u0107 go\u015bci: ",null===j||void 0===j?void 0:j.maxPeople]}),Object(u.jsxs)("p",{children:["Gospodarz: ",null===p||void 0===p?void 0:p.firstName]}),Object(u.jsxs)("p",{children:["Email: ",null===p||void 0===p?void 0:p.email]})]})}),Object(u.jsx)("div",{className:"offer__divider"}),Object(u.jsx)("article",{className:"offer__description",children:Object(u.jsx)("p",{children:null===j||void 0===j?void 0:j.description})}),Object(u.jsx)("div",{className:"offer__divider"}),Object(u.jsxs)("article",{className:"offer__reservation",children:[Object(u.jsx)(_e,{startDate:s.startDate,endDate:s.endDate,onChange:function(e,t){i({type:de.setStartDate,payload:e}),i({type:de.setEndDate,payload:t})},disabledDates:k}),Object(u.jsx)(Ce,{dailyPrice:j.dailyPrice,offerId:j.id})]}),Object(u.jsx)("div",{className:"offer__divider"}),v||g?g?Object(u.jsx)(X,{}):Object(u.jsx)("article",{className:"offer__opinions",children:Object(u.jsx)(Le,{rateCount:Number(null===j||void 0===j?void 0:j.ratings.rateCount),opinionsCount:Number(null===j||void 0===j?void 0:j.ratings.opinionsCount),opinions:v,offer:j,refetchOpinions:y,offerOwnerId:p.id})}):Object(u.jsx)("div",{className:"offer__opinion-fetch-wrapper",children:Object(u.jsx)(re.a,{className:"offer__opinion-refresh-button",onClick:function(){return y()},children:"Za\u0142aduj opinie"})})]})]})},Ue=n(537),Qe=n(59),Ze=n(542),Ve=n(534),qe=n(521),$e=n(522),Je=n(523),Ge=n(267),Ke=n.n(Ge),Xe=function(e){Object(Qe.a)(e);var t=Object(je.useQuery)("cities",Be),n=t.isLoading,a=t.data,c=t.isError,s=t.refetch,i=Object(r.useContext)(we),o=(i.state,i.dispatch);return Object(u.jsxs)("section",{children:[Object(u.jsxs)("div",{className:"search-drawer",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)(Q.a,{"aria-label":"delete",children:Object(u.jsx)(xe.a,{})}),Object(u.jsx)("input",{type:"text",className:"search-drawer__input",placeholder:"Dok\u0105d chcesz pojecha\u0107?"})]}),Object(u.jsx)("p",{children:"W DOWOLNYM MIEJSCU, W DOWOLNYM CZASIE"})]}),Object(u.jsx)(p.a,{sx:{width:"100%",bgcolor:"background.paper",paddingBottom:"20px"},children:Object(u.jsxs)("nav",{"aria-label":"main mailbox folders",children:[n?Object(u.jsx)(X,{}):Object(u.jsx)(Ze.a,{children:a&&a.data.map((function(e){return Object(u.jsx)(Ve.a,{disablePadding:!0,to:"/search",component:f.b,onClick:function(){return function(e){console.log(de.setCity),o({type:de.setCity,payload:e})}(e)},children:Object(u.jsxs)(qe.a,{children:[Object(u.jsx)($e.a,{children:Object(u.jsx)(Ke.a,{})}),Object(u.jsx)(Je.a,{primary:e})]})},e)}))}),c&&Object(u.jsx)("div",{className:"search-drawer__refresh-wrapper",children:Object(u.jsx)(re.a,{className:"search-drawer__refresh-button",onClick:function(){return s()},children:"Za\u0142aduj ponownie"})})]})})]})},et=function(){var e=Object(r.useContext)(T).userState,t=Object(r.useState)(!1),n=Object(b.a)(t,2),a=n[0],c=n[1],s=function(){c(!a)},i=Object(fe.g)();return Object(u.jsxs)("main",{children:[Object(u.jsxs)("div",{className:"home",children:[Object(u.jsx)("h1",{children:"Wybierz swoje wymarzone miejsce na podr\xf3\u017c"}),Object(u.jsxs)("button",{onClick:function(){return e.authenticated?s():i("/signin")},className:"home__button",children:[Object(u.jsx)(x.a,{fontSize:"medium",className:"home__search-icon"}),"Dok\u0105d chcesz pojecha\u0107?"]})]}),Object(u.jsx)(Ue.a,{open:a,onClose:s,anchor:"top",children:Object(u.jsx)(Xe,{})})]})},tt=n(268),nt=n.n(tt),at=function(e){var t,n=e.offer;return Object(u.jsx)(f.b,{to:"/offer/".concat(n.id),children:Object(u.jsxs)("div",{className:"tile-offer",children:[Object(u.jsx)("h2",{children:n.title}),Object(u.jsxs)("div",{className:"tile-offer__image",children:[Object(u.jsx)("img",{src:null===(t=n.images[0])||void 0===t?void 0:t.url,alt:"obrazek"}),Object(u.jsx)(nt.a,{className:"tile-offer__icon"})]}),Object(u.jsxs)("div",{className:"tile-offer__description",children:[Object(u.jsxs)("p",{children:[Object(u.jsx)("u",{children:"Lokalizacja:"})," ",n.city]}),Object(u.jsx)("p",{children:n.description}),Object(u.jsxs)("p",{className:"tile-offer__description__price-per-day",children:[Object(u.jsxs)("strong",{children:[n.dailyPrice," z\u0142"]})," / noc"]})]})]})})},rt=function(e){var t=e.totalPrice,n=e.startDate,a=e.endDate,r=e.reservationId,c=e.onDelete,s=Object(je.useMutation)(Object(ne.a)(te.a.mark((function e(){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.delete("/reservation/".concat(r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),{onSuccess:function(){c()}}),i=s.mutate,o=s.isLoading,l=new Date,j=new Date(n);return Object(u.jsxs)("div",{className:"my-reservations__reservation-tile",children:[Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"my-reservations__totalPrice",children:["\u0141\u0105czna cena za pobyt: ",Object(u.jsxs)("strong",{children:[t," z\u0142"]})]}),Object(u.jsxs)("p",{children:["Data przyjazdu: ",n]}),Object(u.jsxs)("p",{children:["Ostatni dzie\u0144: ",a]})]}),o?Object(u.jsx)(pe.a,{loading:!0,variant:"contained",children:" Submit "}):l<j&&Object(u.jsx)(re.a,{onClick:function(){return i()},children:"Anuluj rezerwacj\u0119"})]})},ct=function(e){Object(Qe.a)(e);var t=Object(r.useContext)(T).userState,n=Object(je.useQuery)("myReservations",Object(ne.a)(te.a.mark((function e(){var t;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.get("./user/reservation");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))),a=n.isFetching,c=n.data,s=n.refetch;return t.authenticated?Object(u.jsx)("main",{className:"my-reservations",children:a?Object(u.jsx)(X,{}):Object(u.jsxs)("section",{className:"my-reservations__content",children:[Object(u.jsx)("h1",{children:"Moje rezerwacje"}),Object(u.jsx)("div",{children:null===c||void 0===c?void 0:c.data.map((function(e){return Object(u.jsxs)("div",{children:[Object(u.jsx)(at,{offer:e.offer}),Object(u.jsx)(rt,{totalPrice:e.price,startDate:e.startDate,endDate:e.endDate,reservationId:e.id,onDelete:s})]},e.id)}))})]})}):Object(u.jsx)(Oe,{})},st=function(e){var t=e.children;return Object(r.useContext)(T).userState.authenticated?t:Object(u.jsx)(fe.a,{to:"/signin"})},it=function(e){var t=e.children;return Object(r.useContext)(T).userState.authenticated?Object(u.jsx)(fe.a,{to:"/home"}):t},ot=n(18),lt=n(538),jt=function(e){var t=e.buttonLabel,n=e.popoverContent,a=c.a.useState(null),r=Object(b.a)(a,2),s=r[0],i=r[1],o=Boolean(s),l=o?"simple-popover":void 0;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(re.a,{"aria-describedby":l,variant:"contained",onClick:function(e){i(e.currentTarget)},children:t}),Object(u.jsx)(lt.a,{id:l,open:o,anchorEl:s,onClose:function(){i(null)},anchorOrigin:{vertical:"center",horizontal:"center"},children:n})]})},ut=n(526),dt=n(270),bt=n.n(dt),pt=function(e){var t=e.drawerIcon,n=e.buttonLabel,a=e.drawerContent,r=e.visible,c=e.setVisible,s=function(){c(!r)};return Object(u.jsxs)("div",{children:[n&&Object(u.jsx)("button",{onClick:s,children:n}),t&&Object(u.jsx)("div",{onClick:s,children:t}),Object(u.jsx)(Ue.a,{open:r,onClose:s,anchor:"top",children:a})]})},Ot=n(3),ht=n(269),ft=n.n(ht),mt=n(535),xt=n(530),vt=n(551),gt=n(550),yt=n(153),_t=n.n(yt);function kt(e){return"".concat(e," $")}var wt=function(e){var t=e.setVisible,n=e.visible,a=e.filters,c=e.setFilters,s=e.prices,i=Object(r.useState)(a.price),j=Object(b.a)(i,2),d=j[0],p=j[1],O=[{label:"Dom",property:"home",checked:a.home},{label:"Apartament",property:"apartment",checked:a.apartment},{label:"Hotel",property:"hotel",checked:a.hotel},{label:"Hostel",property:"hostel",checked:a.hostel}],h=function(e){c(Object(o.a)(Object(o.a)({},a),{},Object(Ot.a)({},e.target.name,e.target.checked))),console.log(Object(o.a)(Object(o.a)({},a),{},Object(Ot.a)({},e.target.name,e.target.checked)))};return Object(u.jsxs)("div",{className:"more-filters",children:[Object(u.jsxs)("div",{className:"more-filters__header",children:[Object(u.jsx)(Q.a,{onClick:function(){return t(!n)},children:Object(u.jsx)(ft.a,{})}),Object(u.jsx)("h2",{children:"Wi\u0119cej filtr\xf3w"}),Object(u.jsx)("div",{})]}),Object(u.jsxs)("div",{className:"more-filters__container",children:[Object(u.jsxs)("div",{className:"more-filters__price",children:[Object(u.jsx)("h2",{children:"Cena za noc"}),Object(u.jsx)(mt.a,{getAriaLabel:function(){return"Minimum distance"},value:d,onChange:function(e,t,n){Array.isArray(t)&&p(0===n?[Math.min(t[0],d[1]-10),d[1]]:[d[0],Math.max(t[1],d[0]+10)])},valueLabelDisplay:"auto",getAriaValueText:kt,onChangeCommitted:function(){c(Object(o.a)(Object(o.a)({},a),{},{price:d}))},disableSwap:!0,min:s[0],max:s[1]}),Object(u.jsxs)("div",{className:"more-filters__price__inputs",children:[Object(u.jsx)(l.a,{label:"Cena minimalna",id:"outlined-start-adornment",sx:{m:1,width:"15ch"},InputProps:{startAdornment:Object(u.jsx)(U.a,{position:"start",children:"z\u0142"})},value:d[0]}),Object(u.jsx)("h2",{children:"-"}),Object(u.jsx)(l.a,{label:"Cena maksymalna",id:"outlined-start-adornment",sx:{m:1,width:"15ch"},InputProps:{startAdornment:Object(u.jsx)(U.a,{position:"start",children:"z\u0142"})},value:d[1]})]})]}),Object(u.jsxs)("div",{className:"more-filters__property-type",children:[Object(u.jsx)("h2",{children:"Rodzaj nieruchomo\u015bci"}),Object(u.jsx)("div",{children:O.map((function(e){return Object(u.jsx)(gt.a,{control:Object(u.jsx)(xt.a,{checked:e.checked,name:e.property,onChange:h}),label:e.label},e.property)}))})]}),Object(u.jsxs)("div",{className:"more-filters__facilities",children:[Object(u.jsx)("h2",{children:"Palenie"}),Object(u.jsx)(gt.a,{control:Object(u.jsx)(vt.a,{checked:a.smoking,name:"smoking",onChange:h}),label:Object(u.jsx)(_t.a,{})})]})]})]})},Nt=function(){var e=Object(ne.a)(te.a.mark((function e(t){var n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be({url:"./offer",params:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Dt={price:[0,1e4],smoking:!1,apartment:!0,hotel:!0,hostel:!0,home:!0},St=function(e){Object(Qe.a)(e);var t=Object(r.useContext)(we),n=t.state,a=t.dispatch,c=Object(r.useContext)(T).userState,s=Object(r.useState)(Dt),i=Object(b.a)(s,2),j=i[0],d=i[1],p=Object(r.useState)(null),O=Object(b.a)(p,2),h=O[0],f=O[1],m=Object(r.useState)([0,1e4]),x=Object(b.a)(m,2),v=x[0],g=x[1],y=Object(je.useQuery)("cities",Be),_=y.isLoading,k=y.data,w={city:"",people:1,startDate:"",endDate:""},N=Object(je.useQuery)(["offers",w],(function(){return Nt(w)}),{enabled:!1,onSuccess:function(e){if(e.data.length>=1){var t=e.data.reduce((function(e,t){return e.concat(t.dailyPrice)}),[]);d(Object(o.a)(Object(o.a)({},j),{},{price:[Math.min.apply(Math,Object(ot.a)(t)),Math.max.apply(Math,Object(ot.a)(t))]})),g([Math.min.apply(Math,Object(ot.a)(t)),Math.max.apply(Math,Object(ot.a)(t))])}}}),D=N.isFetching,S=N.data,z=N.refetch;Object(r.useEffect)((function(){var e=null===S||void 0===S?void 0:S.data.filter((function(e){return!(e.dailyPrice<j.price[0]||e.dailyPrice>j.price[1])&&(!(j.smoking&&!e.smoking)&&(!("HOME"===e.type&&!j.home)&&(!("APARTMENT"===e.type&&!j.apartment)&&(!("HOTEL"===e.type&&!j.hotel)&&!("HOSTEL"===e.type&&!j.hostel)))))}));f(e)}),[j.apartment,j.home,j.hostel,j.hotel,j.price,j.smoking,null===S||void 0===S?void 0:S.data]);var C=Object(r.useState)(!1),P=Object(b.a)(C,2),I=P[0],L=P[1],E=Object(fe.g)();return c.authenticated?Object(u.jsxs)("main",{className:"search",children:[_?Object(u.jsx)(X,{}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"search__input",children:[Object(u.jsx)(xe.a,{className:"search__icon",onClick:function(){return E(-1)}}),Object(u.jsx)(ut.a,{value:n.city,onChange:function(e,t){var n;(n=t)&&a({type:de.setCity,payload:n})},className:"search__autocomplete",disablePortal:!0,id:"combo-box-demo",options:null===k||void 0===k?void 0:k.data,renderInput:function(e){return Object(u.jsx)(l.a,Object(o.a)(Object(o.a)({},e),{},{value:n.city,label:"Wybierz miasto"}))}}),Object(u.jsx)(pt,{drawerIcon:Object(u.jsx)(bt.a,{className:"search__icon"}),drawerContent:Object(u.jsx)(wt,{setVisible:L,visible:I,filters:j,setFilters:d,prices:v}),setVisible:L,visible:I})]}),Object(u.jsxs)("div",{className:"search__filters",children:[Object(u.jsx)(l.a,{type:"number",variant:"outlined",label:"Ilo\u015b\u0107 os\xf3b",value:n.people,inputProps:{min:"1",max:"10",step:"1"},sx:{width:150},onChange:function(e){return function(e,t){a({type:t,payload:e.target.value})}(e,de.setPeople)}}),Object(u.jsx)(jt,{buttonLabel:"Wybierz dat\u0119",popoverContent:Object(u.jsx)(_e,{startDate:n.startDate,endDate:n.endDate,onChange:function(e,t){a({type:de.setStartDate,payload:e}),a({type:de.setEndDate,payload:t})}})})]}),Object(u.jsx)(re.a,{className:"search__button",variant:"contained",onClick:function(){w={city:n.city,people:n.people,startDate:ze()(n.startDate).format("YYYY-MM-DD"),endDate:ze()(n.endDate).format("YYYY-MM-DD")},z()},children:"Wyszukaj"})]}),Object(u.jsx)("div",{className:"divider"}),Object(u.jsx)("section",{className:"search__display-offers",children:D?Object(u.jsx)(X,{}):null===h||void 0===h?void 0:h.map((function(e){return Object(u.jsx)(at,{offer:e},e.id)}))})]}):Object(u.jsx)(Oe,{})},zt=n(277),Ct=n(274),Tt=n.n(Ct),Pt=n(273),It=n.n(Pt),Lt=function(e){var t=e.name,n=e.checked,a=e.label,r=Object(j.f)().register;return Object(u.jsx)(gt.a,{control:Object(u.jsx)(vt.a,Object(o.a)({defaultChecked:n},r(t))),label:a})},Et=[{value:"HOME",label:"Dom"},{value:"HOSTEL",label:"Hostel"},{value:"HOTEL",label:"Hotel"},{value:"APARTMENT",label:"Apartament"}],Mt=function(e){var t=e.isLoading,n=e.onSubmit,a=e.offer,c=e.submitButtonName,s=Object(r.useState)(null===a||void 0===a?void 0:a.type),i=Object(b.a)(s,2),l=i[0],p=i[1],O=Object(j.e)();return Object(u.jsx)(j.a,Object(o.a)(Object(o.a)({},O),{},{children:Object(u.jsxs)("form",{onSubmit:O.handleSubmit(n),className:"add-offer__form",children:[Object(u.jsx)(d,{label:"Tytu\u0142 oferty",name:"title",placeholder:"Wprowad\u017a nazw\u0119 oferty",type:"text",variant:"outlined",value:null===a||void 0===a?void 0:a.title}),Object(u.jsx)(d,{label:"Nazwa miasta",name:"city",placeholder:"Wprowad\u017a nazw\u0119 miasta",type:"text",variant:"outlined",value:null===a||void 0===a?void 0:a.city}),Object(u.jsx)(d,{label:"Ilo\u015b\u0107 miejsc",name:"maxPeople",placeholder:"Wprowad\u017a ilo\u015b\u0107 miejsc",type:"number",variant:"outlined",numberProps:{min:"1",max:"10",step:"1"},value:null===a||void 0===a?void 0:a.maxPeople}),Object(u.jsx)(d,{label:"Cena za noc",name:"dailyPrice",placeholder:"Wprowad\u017a cen\u0119 za noc",type:"number",variant:"outlined",value:null===a||void 0===a?void 0:a.dailyPrice}),Object(u.jsx)(G,{name:"type",menuItems:Et,value:l,setValue:p,label:"Wybierz nieruchomo\u015b\u0107"}),Object(u.jsx)(d,{label:"Opis",name:"description",placeholder:"Wprowad\u017a opis",type:"number",variant:"outlined",multiline:!0,value:null===a||void 0===a?void 0:a.description}),Object(u.jsxs)("span",{children:[" ",Object(u.jsx)("p",{children:"Mo\u017cna pali\u0107 w \u015brodku?"}),Object(u.jsx)(Lt,{name:"smoking",checked:null===a||void 0===a?void 0:a.smoking,label:Object(u.jsx)(_t.a,{})})]}),t?Object(u.jsx)(pe.a,{loading:!0,variant:"outlined",children:"Submit"}):Object(u.jsx)(re.a,{type:"submit",children:c})]})}))},Rt=n(271),Bt=function(){var e=Object(r.useState)(""),t=Object(b.a)(e,2),n=(t[0],t[1],Object(r.useState)([])),a=Object(b.a)(n,2),c=a[0],s=a[1],i=Object(fe.g)(),l=Object(je.useMutation)(function(){var e=Object(ne.a)(te.a.mark((function e(t){var n,a;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("title",t.title),n.append("city",t.city),n.append("maxPeople",t.maxPeople.toString()),n.append("dailyPrice",t.dailyPrice.toString()),n.append("type",t.type),n.append("description",t.description),n.append("smoking",t.smoking.toString()),t.photos.forEach((function(e){n.append("photos",e)})),e.next=11,be.post("./offer",n);case 11:return a=e.sent,e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(e){console.log(e,"przeszlo"),i("/settings")}}),d=l.isLoading,p=l.mutate,O=(Object(r.useContext)(T).dispatch,Object(j.e)(),Object(zt.a)({accept:"image/*",onDrop:function(e){var t=e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})}));s([].concat(Object(ot.a)(c),Object(ot.a)(t)))}})),h=O.getRootProps,f=O.getInputProps,m=null===c||void 0===c?void 0:c.map((function(e){return Object(u.jsxs)("div",{className:"add-offer__thumb-inner",children:[Object(u.jsx)(It.a,{className:"add-offer__delete-photo",onClick:function(){return t=e.name,console.log(c.filter((function(e){return e.name===t}))),void s(c.filter((function(e){return e.name!==t})));var t}}),Object(u.jsx)("img",{className:"add-offer__thumb-img",src:URL.createObjectURL(e),alt:"dropzone-photo"})]},e.name)}));return Object(r.useEffect)((function(){c&&c.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}),[c]),Object(u.jsxs)("main",{className:"add-offer",children:[Object(u.jsx)("h1",{children:"Dodaj ofert\u0119"}),Object(u.jsxs)("div",{children:[Object(u.jsxs)("section",{className:"add-offer__container-dropzone",children:[Object(u.jsxs)("div",Object(o.a)(Object(o.a)({},h({className:"add-offer__dropzone"})),{},{children:[Object(u.jsx)("input",Object(o.a)({},f())),Object(u.jsx)(Tt.a,{fontSize:"large"}),Object(u.jsx)("p",{children:"Wrzu\u0107 zdj\u0119cia albo kilknij"})]})),Object(u.jsx)("aside",{className:"add-offer__thumb-container",children:m})]}),Object(u.jsx)(Mt,{isLoading:d,onSubmit:function(e){var t={maxSizeMB:.5,maxWidthOrHeight:1e3,useWebWorker:!0},n=c.map(function(){var e=Object(ne.a)(te.a.mark((function e(n){var a;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Rt.a)(n,t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());console.log(c),Promise.all(n).then((function(t){var n=Object(o.a)(Object(o.a)({},e),{},{photos:t});console.log(t),p(n)}))},submitButtonName:"Dodaj ofert\u0119"})]})]})},Ft=function(e){Object(Qe.a)(e);var t=Object(fe.g)(),n=Object(fe.f)().state,a=Object(je.useQuery)(["offer",n.id],(function(){return Fe(n.id)})),r=a.data,c=a.isFetching,s=Object(je.useMutation)(function(){var e=Object(ne.a)(te.a.mark((function e(t){var a,r;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t.smoking),(a=new FormData).append("title",t.title),a.append("city",t.city),a.append("maxPeople",t.maxPeople.toString()),a.append("dailyPrice",t.dailyPrice.toString()),a.append("type",t.type),a.append("description",t.description),a.append("smoking",t.smoking.toString()),e.next=11,be.put("./offer/".concat(n.id),a);case 11:return r=e.sent,e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(e){console.log(e,"przeszlo"),t("/settings")}}),i=s.isLoading,o=s.mutate;return Object(u.jsxs)("section",{className:"edit-offer",children:[Object(u.jsxs)("div",{className:"offer__nav",children:[Object(u.jsx)(xe.a,{className:"search__icon",onClick:function(){return t(-1)}}),Object(u.jsx)(u.Fragment,{})]}),Object(u.jsx)(Re,{images:null===r||void 0===r?void 0:r.images.map((function(e){return e.url}))}),c?Object(u.jsx)(X,{}):Object(u.jsx)(Mt,{isLoading:i,onSubmit:function(e){console.log(e),o(e)},offer:r,submitButtonName:"Edytuj ofert\u0119"})]})},At=n(524),Wt=function(e){var t=e.offer,n=e.onDelete,a=Object(je.useMutation)(Object(ne.a)(te.a.mark((function e(){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.delete("/offer/".concat(t.id));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),{onSuccess:function(){n()}}).mutate;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(at,{offer:t}),Object(u.jsxs)("div",{className:"user-offer-tile",children:[Object(u.jsx)(f.b,{to:"/editOffer",state:{id:t.id},children:"Edytuj"}),Object(u.jsx)("p",{className:"user-offer-tile--delete",onClick:function(){return a()},children:"Usu\u0144"})]})]})},Ht=function(e){Object(Qe.a)(e);var t=Object(r.useContext)(T).dispatch,n=Object(je.useQuery)("userOffers",Object(ne.a)(te.a.mark((function e(){var t;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.get("./user/offer");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),c=n.data,s=n.isLoading,i=n.refetch;return Object(u.jsxs)("div",{className:"settings",children:[Object(u.jsx)(re.a,{onClick:function(){return t({type:a.logout,payload:""})},children:"Wyloguj si\u0119"}),Object(u.jsx)(At.a,{className:"settings__divider"}),Object(u.jsx)("h1",{children:"Twoje oferty"}),s?Object(u.jsx)(X,{}):null===c||void 0===c?void 0:c.map((function(e){return Object(u.jsx)(Wt,{offer:e,onDelete:i},e.id)}))]})},Yt=function(){return Object(u.jsx)(De,{children:Object(u.jsxs)(f.a,{children:[Object(u.jsx)(F,{}),Object(u.jsxs)(fe.d,{children:[Object(u.jsx)(fe.b,{path:"/signup",element:Object(u.jsx)(it,{children:Object(u.jsx)(he,{})})}),Object(u.jsx)(fe.b,{path:"/signin",element:Object(u.jsx)(it,{children:Object(u.jsx)(Oe,{})})}),Object(u.jsx)(fe.b,{path:"/myReservations",element:Object(u.jsx)(st,{children:Object(u.jsx)(ct,{})})}),Object(u.jsx)(fe.b,{path:"/addOffer",element:Object(u.jsx)(st,{children:Object(u.jsx)(Bt,{})})}),Object(u.jsx)(fe.b,{path:"/editOffer",element:Object(u.jsx)(st,{children:Object(u.jsx)(Ft,{})})}),Object(u.jsx)(fe.b,{path:"/settings",element:Object(u.jsx)(st,{children:Object(u.jsx)(Ht,{})})}),Object(u.jsx)(fe.b,{path:"/search",element:Object(u.jsx)(St,{})}),Object(u.jsx)(fe.b,{path:"/offer/:id",element:Object(u.jsx)(st,{children:Object(u.jsx)(Ye,{})})}),Object(u.jsx)(fe.b,{path:"/",element:Object(u.jsx)(et,{})}),Object(u.jsx)(fe.b,{path:"/home",element:Object(u.jsx)(et,{})})]}),Object(u.jsx)(M,{})]})})},Ut=n(525),Qt=n(275),Zt=new je.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1}}});var Vt=function(){return Object(u.jsx)(je.QueryClientProvider,{client:Zt,children:Object(u.jsx)(I,{children:Object(u.jsxs)(Ut.a,{injectFirst:!0,children:[Object(u.jsx)(Yt,{}),Object(u.jsx)(Qt.ReactQueryDevtools,{initialIsOpen:!1})]})})})};i.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(Vt,{})}),document.getElementById("root"))}},[[459,1,2]]]);
//# sourceMappingURL=main.b0367948.chunk.js.map